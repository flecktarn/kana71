<html>
	<head>
		<link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">
		<meta charset="utf-8"/>
		<link rel = "stylesheet" type = "text/css" href=./style.css>
		
		
		<title>Kana Practice</title>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
		
	</head>

	<body >



		<div id = "mainwrapper">
			
		



		



		

		<div id = "studypage" >
			<p id = "kanaPrompt"><br></p>
			<p id = "wrongPrompt">あ = a </p>
			<div id = "inputWrapper">
			<input type = "text" id = "kanaInput" maxlength = 3>
			<span id = "rate"><span id = "correctCount">0</span>/<span id = "allCount">0</span></span>
			<span id = "streak">0</span>
			</div>

			<div id = "controls">

				
				<button id = "optionsButton">Select Kana<span id = "optionsIndicator">▼</span></button>
				
				
			</div>

			<div id = "optionsPanel" style = "display:none">


			

				
				
				<h3>Hiragana</h3>
				<a id = "hiraDisable">Disable all</a><a id = "hiraEnable">Enable all</a>
				<table class="kanaTable" id="optionsTable1">	
					<tbody><tr>
					<td><button class="columnToggle" style="background-color: black;">−</button></td>
					<td><button class="columnToggle">+</button></td>
					<td><button class="columnToggle">+</button></td>
					<td><button class="columnToggle">+</button></td>
					<td><button class="columnToggle">+</button></td>
					<td><button class="columnToggle">+</button></td>
					<td><button class="columnToggle">+</button></td>
					<td><button class="columnToggle">+</button></td>
					<td><button class="columnToggle">+</button></td>
					<td><button class="columnToggle">+</button></td>
					<td><button class="columnToggle">+</button></td>
					<td><button class="columnToggle">+</button></td>
					<td><button class="columnToggle">+</button></td>
					<td><button class="columnToggle">+</button></td>
					<td><button class="columnToggle">+</button></td>
					<td><button class="columnToggle">+</button></td>
				</tr>
								<tr><td class="kanaSymbol activated" id="あ">あ<br><p class="romaLabel">a</p></td><td class="kanaSymbol" id="か">か<br><p class="romaLabel">ka</p></td><td class="kanaSymbol" id="さ">さ<br><p class="romaLabel">sa</p></td><td class="kanaSymbol" id="た">た<br><p class="romaLabel">ta</p></td><td class="kanaSymbol" id="な">な<br><p class="romaLabel">na</p></td><td class="kanaSymbol" id="は">は<br><p class="romaLabel">ha</p></td><td class="kanaSymbol" id="や">や<br><p class="romaLabel">ya</p></td><td class="kanaSymbol" id="ま">ま<br><p class="romaLabel">ma</p></td><td class="kanaSymbol" id="ら">ら<br><p class="romaLabel">ra</p></td><td class="kanaSymbol" id="わ">わ<br><p class="romaLabel">wa</p></td><td class="emptySpace"> <br></td><td class="kanaSymbol" id="が">が<br><p class="romaLabel">ga</p></td><td class="kanaSymbol" id="ざ">ざ<br><p class="romaLabel">za</p></td><td class="kanaSymbol" id="だ">だ<br><p class="romaLabel">da</p></td><td class="kanaSymbol" id="ば">ば<br><p class="romaLabel">ba</p></td><td class="kanaSymbol" id="ぱ">ぱ<br><p class="romaLabel">pa</p></td></tr><tr><td class="kanaSymbol activated" id="い">い<br><p class="romaLabel">i</p></td><td class="kanaSymbol" id="き">き<br><p class="romaLabel">ki</p></td><td class="kanaSymbol" id="し">し<br><p class="romaLabel">shi</p></td><td class="kanaSymbol" id="ち">ち<br><p class="romaLabel">chi</p></td><td class="kanaSymbol" id="に">に<br><p class="romaLabel">ni</p></td><td class="kanaSymbol" id="ひ">ひ<br><p class="romaLabel">hi</p></td><td class="emptySpace"> <br></td><td class="kanaSymbol" id="み">み<br><p class="romaLabel">mi</p></td><td class="kanaSymbol" id="り">り<br><p class="romaLabel">ri</p></td><td class="emptySpace"> <br></td><td class="emptySpace"> <br></td><td class="kanaSymbol" id="ぎ">ぎ<br><p class="romaLabel">gi</p></td><td class="kanaSymbol" id="じ">じ<br><p class="romaLabel">ji</p></td><td class="kanaSymbol" id="ぢ">ぢ<br><p class="romaLabel">ji</p></td><td class="kanaSymbol" id="び">び<br><p class="romaLabel">bi</p></td><td class="kanaSymbol" id="ぴ">ぴ<br><p class="romaLabel">pi</p></td></tr><tr><td class="kanaSymbol activated" id="う">う<br><p class="romaLabel">u</p></td><td class="kanaSymbol" id="く">く<br><p class="romaLabel">ku</p></td><td class="kanaSymbol" id="す">す<br><p class="romaLabel">su</p></td><td class="kanaSymbol" id="つ">つ<br><p class="romaLabel">tsu</p></td><td class="kanaSymbol" id="ぬ">ぬ<br><p class="romaLabel">nu</p></td><td class="kanaSymbol" id="ふ">ふ<br><p class="romaLabel">fu</p></td><td class="kanaSymbol" id="ゆ">ゆ<br><p class="romaLabel">yu</p></td><td class="kanaSymbol" id="む">む<br><p class="romaLabel">mu</p></td><td class="kanaSymbol" id="る">る<br><p class="romaLabel">ru</p></td><td class="emptySpace"> <br></td><td class="emptySpace"> <br></td><td class="kanaSymbol" id="ぐ">ぐ<br><p class="romaLabel">gu</p></td><td class="kanaSymbol" id="ず">ず<br><p class="romaLabel">zu</p></td><td class="kanaSymbol" id="ず">づ<br><p class="romaLabel">zu</p></td><td class="kanaSymbol" id="ぶ">ぶ<br><p class="romaLabel">bu</p></td><td class="kanaSymbol" id="ぷ">ぷ<br><p class="romaLabel">pu</p></td></tr><tr><td class="kanaSymbol activated" id="え">え<br><p class="romaLabel">e</p></td><td class="kanaSymbol" id="け">け<br><p class="romaLabel">ke</p></td><td class="kanaSymbol" id="せ">せ<br><p class="romaLabel">se</p></td><td class="kanaSymbol" id="て">て<br><p class="romaLabel">te</p></td><td class="kanaSymbol" id="ね">ね<br><p class="romaLabel">ne</p></td><td class="kanaSymbol" id="へ">へ<br><p class="romaLabel">he</p></td><td class="emptySpace"> <br></td><td class="kanaSymbol" id="め">め<br><p class="romaLabel">me</p></td><td class="kanaSymbol" id="れ">れ<br><p class="romaLabel">re</p></td><td class="emptySpace"> <br></td><td class="emptySpace"> <br></td><td class="kanaSymbol" id="げ">げ<br><p class="romaLabel">ge</p></td><td class="kanaSymbol" id="ぜ">ぜ<br><p class="romaLabel">ze</p></td><td class="kanaSymbol" id="で">で<br><p class="romaLabel">de</p></td><td class="kanaSymbol" id="べ">べ<br><p class="romaLabel">be</p></td><td class="kanaSymbol" id="ぺ">ぺ<br><p class="romaLabel">pe</p></td></tr><tr><td class="kanaSymbol activated" id="お">お<br><p class="romaLabel">o</p></td><td class="kanaSymbol" id="こ">こ<br><p class="romaLabel">ko</p></td><td class="kanaSymbol" id="そ">そ<br><p class="romaLabel">so</p></td><td class="kanaSymbol" id="と">と<br><p class="romaLabel">to</p></td><td class="kanaSymbol" id="の">の<br><p class="romaLabel">no</p></td><td class="kanaSymbol" id="ほ">ほ<br><p class="romaLabel">ho</p></td><td class="kanaSymbol" id="よ">よ<br><p class="romaLabel">yo</p></td><td class="kanaSymbol" id="も">も<br><p class="romaLabel">mo</p></td><td class="kanaSymbol" id="ろ">ろ<br><p class="romaLabel">ro</p></td><td class="kanaSymbol" id="を">を<br><p class="romaLabel">wo</p></td><td class="kanaSymbol" id="ん">ん<br><p class="romaLabel">n</p></td><td class="kanaSymbol" id="ご">ご<br><p class="romaLabel">go</p></td><td class="kanaSymbol" id="ぞ">ぞ<br><p class="romaLabel">zo</p></td><td class="kanaSymbol" id="ど">ど<br><p class="romaLabel">do</p></td><td class="kanaSymbol" id="ぼ">ぼ<br><p class="romaLabel">bo</p></td><td class="kanaSymbol" id="ぽ">ぽ<br><p class="romaLabel">po</p></td></tr>
			</tbody></table>
			<br>
				<h3>Katakana</h3>
				<a id = "kanaDisable">Disable all</a><a id = "kanaEnable">Enable all</a>
			<table class="kanaTable" id="optionsTable2">

				<tbody><tr>
					<td><button class="columnToggle">+</button></td>
					<td><button class="columnToggle">+</button></td>
					<td><button class="columnToggle">+</button></td>
					<td><button class="columnToggle">+</button></td>
					<td><button class="columnToggle">+</button></td>
					<td><button class="columnToggle">+</button></td>
					<td><button class="columnToggle">+</button></td>
					<td><button class="columnToggle">+</button></td>
					<td><button class="columnToggle">+</button></td>
					<td><button class="columnToggle">+</button></td>
					<td><button class="columnToggle">+</button></td>
					<td><button class="columnToggle">+</button></td>
					<td><button class="columnToggle">+</button></td>
					<td><button class="columnToggle">+</button></td>
					<td><button class="columnToggle">+</button></td>
					<td><button class="columnToggle">+</button></td>
				</tr>
							


								
						<tr><td class="kanaSymbol" id="ア">ア<br><p class="romaLabel">a</p></td><td class="kanaSymbol" id="カ">カ<br><p class="romaLabel">ka</p></td><td class="kanaSymbol" id="サ">サ<br><p class="romaLabel">sa</p></td><td class="kanaSymbol" id="タ">タ<br><p class="romaLabel">ta</p></td><td class="kanaSymbol" id="ナ">ナ<br><p class="romaLabel">na</p></td><td class="kanaSymbol" id="ハ">ハ<br><p class="romaLabel">ha</p></td><td class="kanaSymbol" id="ヤ">ヤ<br><p class="romaLabel">ya</p></td><td class="kanaSymbol" id="マ">マ<br><p class="romaLabel">ma</p></td><td class="kanaSymbol" id="ラ">ラ<br><p class="romaLabel">ra</p></td><td class="kanaSymbol" id="ワ">ワ<br><p class="romaLabel">wa</p></td><td class="emptySpace"> <br></td><td class="kanaSymbol" id="ガ">ガ<br><p class="romaLabel">ga</p></td><td class="kanaSymbol" id="ザ">ザ<br><p class="romaLabel">za</p></td><td class="kanaSymbol" id="ダ">ダ<br><p class="romaLabel">da</p></td><td class="kanaSymbol" id="バ">バ<br><p class="romaLabel">ba</p></td><td class="kanaSymbol" id="パ">パ<br><p class="romaLabel">pa</p></td></tr><tr><td class="kanaSymbol" id="イ">イ<br><p class="romaLabel">i</p></td><td class="kanaSymbol" id="キ">キ<br><p class="romaLabel">ki</p></td><td class="kanaSymbol" id="シ">シ<br><p class="romaLabel">shi</p></td><td class="kanaSymbol" id="チ">チ<br><p class="romaLabel">chi</p></td><td class="kanaSymbol" id="ニ">ニ<br><p class="romaLabel">ni</p></td><td class="kanaSymbol" id="ヒ">ヒ<br><p class="romaLabel">hi</p></td><td class="emptySpace"> <br></td><td class="kanaSymbol" id="ミ">ミ<br><p class="romaLabel">mi</p></td><td class="kanaSymbol" id="リ">リ<br><p class="romaLabel">ri</p></td><td class="emptySpace"> <br></td><td class="emptySpace"> <br></td><td class="kanaSymbol" id="ギ">ギ<br><p class="romaLabel">gi</p></td><td class="kanaSymbol" id="ジ">ジ<br><p class="romaLabel">ji</p></td><td class="kanaSymbol" id="ヂ">ヂ<br><p class="romaLabel">ji</p></td><td class="kanaSymbol" id="ビ">ビ<br><p class="romaLabel">bi</p></td><td class="kanaSymbol" id="ピ">ピ<br><p class="romaLabel">pi</p></td></tr><tr><td class="kanaSymbol" id="ウ">ウ<br><p class="romaLabel">u</p></td><td class="kanaSymbol" id="ク">ク<br><p class="romaLabel">ku</p></td><td class="kanaSymbol" id="ス">ス<br><p class="romaLabel">su</p></td><td class="kanaSymbol" id="ツ">ツ<br><p class="romaLabel">tsu</p></td><td class="kanaSymbol" id="ヌ">ヌ<br><p class="romaLabel">nu</p></td><td class="kanaSymbol" id="フ">フ<br><p class="romaLabel">fu</p></td><td class="kanaSymbol" id="ユ">ユ<br><p class="romaLabel">yu</p></td><td class="kanaSymbol" id="ム">ム<br><p class="romaLabel">mu</p></td><td class="kanaSymbol" id="ル">ル<br><p class="romaLabel">ru</p></td><td class="emptySpace"> <br></td><td class="emptySpace"> <br></td><td class="kanaSymbol" id="グ">グ<br><p class="romaLabel">gu</p></td><td class="kanaSymbol" id="ズ">ズ<br><p class="romaLabel">zu</p></td><td class="kanaSymbol" id="ヅ">ヅ<br><p class="romaLabel">zu</p></td><td class="kanaSymbol" id="ブ">ブ<br><p class="romaLabel">bu</p></td><td class="kanaSymbol" id="プ">プ<br><p class="romaLabel">pu</p></td></tr><tr><td class="kanaSymbol" id="エ">エ<br><p class="romaLabel">e</p></td><td class="kanaSymbol" id="ケ">ケ<br><p class="romaLabel">ke</p></td><td class="kanaSymbol" id="セ">セ<br><p class="romaLabel">se</p></td><td class="kanaSymbol" id="テ">テ<br><p class="romaLabel">te</p></td><td class="kanaSymbol" id="ネ">ネ<br><p class="romaLabel">ne</p></td><td class="kanaSymbol" id="ヘ">ヘ<br><p class="romaLabel">he</p></td><td class="emptySpace"> <br></td><td class="kanaSymbol" id="メ">メ<br><p class="romaLabel">me</p></td><td class="kanaSymbol" id="レ">レ<br><p class="romaLabel">re</p></td><td class="emptySpace"> <br></td><td class="emptySpace"> <br></td><td class="kanaSymbol" id="ゲ">ゲ<br><p class="romaLabel">ge</p></td><td class="kanaSymbol" id="ゼ">ゼ<br><p class="romaLabel">ze</p></td><td class="kanaSymbol" id="デ">デ<br><p class="romaLabel">de</p></td><td class="kanaSymbol" id="ベ">ベ<br><p class="romaLabel">be</p></td><td class="kanaSymbol" id="ペ">ペ<br><p class="romaLabel">pe</p></td></tr><tr><td class="kanaSymbol" id="オ">オ<br><p class="romaLabel">o</p></td><td class="kanaSymbol" id="コ">コ<br><p class="romaLabel">ko</p></td><td class="kanaSymbol" id="ソ">ソ<br><p class="romaLabel">so</p></td><td class="kanaSymbol" id="ト">ト<br><p class="romaLabel">to</p></td><td class="kanaSymbol" id="ノ">ノ<br><p class="romaLabel">no</p></td><td class="kanaSymbol" id="ホ">ホ<br><p class="romaLabel">ho</p></td><td class="kanaSymbol" id="ヨ">ヨ<br><p class="romaLabel">yo</p></td><td class="kanaSymbol" id="モ">モ<br><p class="romaLabel">mo</p></td><td class="kanaSymbol" id="ロ">ロ<br><p class="romaLabel">ro</p></td><td class="kanaSymbol" id="ヲ">ヲ<br><p class="romaLabel">wo</p></td><td class="kanaSymbol" id="ン">ン<br><p class="romaLabel">n</p></td><td class="kanaSymbol" id="ゴ">ゴ<br><p class="romaLabel">go</p></td><td class="kanaSymbol" id="ゾ">ゾ<br><p class="romaLabel">zo</p></td><td class="kanaSymbol" id="ド">ド<br><p class="romaLabel">do</p></td><td class="kanaSymbol" id="ボ">ボ<br><p class="romaLabel">bo</p></td><td class="kanaSymbol" id="ポ">ポ<br><p class="romaLabel">po</p></td></tr>
				</tbody></table>

			

				
			</div>




		</div>

	

		





	<script>

		var rightCount = 0;
		var allCount = 0;
		var gradCo = 1.05;
		var requireEnterPress = $("#enterCheckbox").prop('checked');
		var optionsShown = false;
		var firsttime = true;

		var dict ={"あ": ["a",1,0,30,false],
  "い": ["i",1,0,30,false],
  "う": ["u",1,0,30,false],
  "え": ["e",1,0,30,false],
  "お": ["o",1,0,30,false],
  "か": ["ka",1,0,30,false],
  "き": ["ki",1,0,30,false],
  "く": ["ku",1,0,30,false],
  "け": ["ke",1,0,30,false],
  "こ": ["ko",1,0,30,false],
  "さ": ["sa",1,0,30,false],
  "し": ["shi",1,0,30,false],
  "す": ["su",1,0,30,false],
  "せ": ["se",1,0,30,false],
  "そ": ["so",1,0,30,false],
  "た": ["ta",1,0,30,false],
  "ち": ["chi",1,0,30,false],
  "つ": ["tsu",1,0,30,false],
  "て": ["te",1,0,30,false],
  "と": ["to",1,0,30,false],
  "な": ["na",1,0,30,false],
  "に": ["ni",1,0,30,false],
  "ぬ": ["nu",1,0,30,false],
  "ね": ["ne",1,0,30,false],
  "の": ["no",1,0,30,false],
  "は": ["ha",1,0,30,false],
  "ひ": ["hi",1,0,30,false],
  "ふ": ["fu",1,0,30,false],
  "へ": ["he",1,0,30,false],
  "ほ": ["ho",1,0,30,false],
  "や": ["ya",1,0,30,false],
  " ": " ",
  "ゆ": ["yu",1,0,30,false],
  "よ": ["yo",1,0,30,false],
  "ま": ["ma",1,0,30,false],
  "み": ["mi",1,0,30,false],
  "む": ["mu",1,0,30,false],
  "め": ["me",1,0,30,false],
  "も": ["mo",1,0,30,false],
  "ら": ["ra",1,0,30,false],
  "り": ["ri",1,0,30,false],
  "る": ["ru",1,0,30,false],
  "れ": ["re",1,0,30,false],
  "ろ": ["ro",1,0,30,false],
  "わ": ["wa",1,0,30,false],
  "を": ["wo",1,0,30,false],
  "ん": ["n",1,0,30,false],
  "が": ["ga",1,0,30,false],
  "ぎ": ["gi",1,0,30,false],
  "ぐ": ["gu",1,0,30,false],
  "げ": ["ge",1,0,30,false],
  "ご": ["go",1,0,30,false],
  "ざ": ["za",1,0,30,false],
  "じ": ["ji",1,0,30,false],
  "ず": ["zu",1,0,30,false],
  "ぜ": ["ze",1,0,30,false],
  "ぞ": ["zo",1,0,30,false],
  "だ": ["da",1,0,30,false],
  "ぢ": ["ji",1,0,30,false],
  "で": ["de",1,0,30,false],
  "ど": ["do",1,0,30,false],
  "ば": ["ba",1,0,30,false],
  "び": ["bi",1,0,30,false],
  "ぶ": ["bu",1,0,30,false],
  "べ": ["be",1,0,30,false],
  "ぼ": ["bo",1,0,30,false],
  "ぱ": ["pa",1,0,30,false],
  "ぴ": ["pi",1,0,30,false],
  "ぷ": ["pu",1,0,30,false],
  "ぺ": ["pe",1,0,30,false],
  "ぽ": ["po",1,0,30,false],
  "ア": ["a",2,0,30,false],
  "イ": ["i",2,0,30,false],
  "ウ": ["u",2,0,30,false],
  "エ": ["e",2,0,30,false],
  "オ": ["o",2,0,30,false],
  "カ": ["ka",2,0,30,false],
  "キ": ["ki",2,0,30,false],
  "ク": ["ku",2,0,30,false],
  "ケ": ["ke",2,0,30,false],
  "コ": ["ko",2,0,30,false],
  "サ": ["sa",2,0,30,false],
  "シ": ["shi",2,0,30,false],
  "ス": ["su",2,0,30,false],
  "セ": ["se",2,0,30,false],
  "ソ": ["so",2,0,30,false],
  "タ": ["ta",2,0,30,false],
  "チ": ["chi",2,0,30,false],
  "ツ": ["tsu",2,0,30,false],
  "テ": ["te",2,0,30,false],
  "ト": ["to",2,0,30,false],
  "ナ": ["na",2,0,30,false],
  "ニ": ["ni",2,0,30,false],
  "ヌ": ["nu",2,0,30,false],
  "ネ": ["ne",2,0,30,false],
  "ノ": ["no",2,0,30,false],
  "ハ": ["ha",2,0,30,false],
  "ヒ": ["hi",2,0,30,false],
  "フ": ["fu",2,0,30,false],
  "ヘ": ["he",2,0,30,false],
  "ホ": ["ho",2,0,30,false],
  "ヤ": ["ya",2,0,30,false],
  "ユ": ["yu",2,0,30,false],
  "ヨ": ["yo",2,0,30,false],
  "マ": ["ma",2,0,30,false],
  "ミ": ["mi",2,0,30,false],
  "ム": ["mu",2,0,30,false],
  "メ": ["me",2,0,30,false],
  "モ": ["mo",2,0,30,false],
  "ラ": ["ra",2,0,30,false],
  "リ": ["ri",2,0,30,false],
  "ル": ["ru",2,0,30,false],
  "レ": ["re",2,0,30,false],
  "ロ": ["ro",2,0,30,false],
  "ワ": ["wa",2,0,30,false],
  "ヲ": ["wo",2,0,30,false],
  "ン": ["n",2,0,30,false],
  "ガ": ["ga",2,0,30,false],
  "ギ": ["gi",2,0,30,false],
  "グ": ["gu",2,0,30,false],
  "ゲ": ["ge",2,0,30,false],
  "ゴ": ["go",2,0,30,false],
  "ザ": ["za",2,0,30,false],
  "ジ": ["ji",2,0,30,false],
  "ズ": ["zu",2,0,30,false],
  "ゼ": ["ze",2,0,30,false],
  "ゾ": ["zo",2,0,30,false],
  "ダ": ["da",2,0,30,false],
  "ヂ": ["ji",2,0,30,false],
  "ヅ": ["zu",2,0,30,false],
  "デ": ["de",2,0,30,false],
  "ド": ["do",2,0,30,false],
  "バ": ["ba",2,0,30,false],
  "ビ": ["bi",2,0,30,false],
  "ブ": ["bu",2,0,30,false],
  "ベ": ["be",2,0,30,false],
  "ボ": ["bo",2,0,30,false],
  "パ": ["pa",2,0,30,false],
  "ピ": ["pi",2,0,30,false],
  "プ": ["pu",2,0,30,false],
  "ペ": ["pe",2,0,30,false],
  "ポ": ["po",2,0,30,false],};
  		
 
  			var currentKana = "あ";
 			var currentPool = $(".activated");
 			var correct = true;
 			var streak = 0;

 			var progress;

	

			

		


		
		$(document).ready(function(){



		

		


			// adding initial pool classes

			function updateCounts (r,a){
				rightCount += r;
				allCount += a;
				if(r*a == 1){
					streak++
					
				}
				else{
					streak = 0;
				}
				$("#streak").html(streak);

				$("#correctCount").html(rightCount);
				$("#allCount").html(allCount);
				
			}

			

			

 			function wrongChar(){
 				
 				correct = false;
 				$("#wrongPrompt").css("opacity",1);
 				$("#kanaInput").css("border","1px solid red");
 			}
			

 			function nextChar(a){
 				if(a == 0){
 					//do nothing, no answer given
 					
 				}
 				else if (a == 1){

 					dict[currentKana][2]++;
 					if(dict[currentKana][3] < 100){
 					dict[currentKana][3]=Math.floor((dict[currentKana][3]+5)*gradCo)+1;
 				}
 					if(dict[currentKana][3] > 100){
 						dict[currentKana][3] = 100;



 					}

 					
 					//correct answer given
 					updateCounts(1,1);



 					
 				}
 				else if (a == 2){
 					//false answer given
 					updateCounts(0,1);
 					if(dict[currentKana][3]>15){
 						dict[currentKana][3]-=5;
 					}
 					
 				}

 				dict[currentKana][4] = true;
 				var lastKana = currentKana;

 				correct = true;
 				var index = Math.floor(Math.random()*currentPool.length)
 				currentKana = $(currentPool[index]).attr("id");
 				$("#kanaPrompt").html(currentKana);
 				$("#kanaInput").val("") 
 				$("#wrongPrompt").css("opacity",0);
 				$("#wrongPrompt").html(currentKana + " = \"" +dict[currentKana][0]+"\"");
 				$("#kanaInput").css("border","1px solid grey");
 				
 				if(dict[lastKana][3]==100){
 					deactivateCard($("#"+lastKana));
 				}
 			}

 			nextChar(0);

 			

 			

 			$("#kanaInput").keydown(function(e) {

 				if(requireEnterPress == true){

 					if(e.which == 13) {
				  	
				  	if ($("#kanaInput").val()==dict[currentKana][0]){

				  		//correct!
				  		$("#kanaInput").val("") ;
				  		if(correct == true){
				  		nextChar(1);
				  		}
				  		else{
				  			nextChar(2);
				  		}
				  	}

				  	else{
				  		//wrong!
				  		
				  		wrongChar();
				  	}
					 }
 				}

 				else{
 					window.setTimeout(function(){

 						if ($("#kanaInput").val() == dict[currentKana][0]){
 							
 						if(correct == true){
				  		nextChar(1);
				  		}
				  		else{
				  			nextChar(2);
				  		}
 							
 								}
 						else if($("#kanaInput").val() == dict[currentKana][0].slice(0,$("#kanaInput").val().length)){
 							
 						}
 						
 						
 						else{
 							
 							wrongChar();
 						}





 					}, 1);
 					
 				}
				  
				});
 				
				  	

			$("#studyKanaButton").click(function(){
				$("#startlearning").slideToggle(100);
				
			});


			$("#startFromScratchButton").click(function(){
				$("#frontpage").hide();
				$("#intropage").show();
			});

			$("#beginbutton").click(function(){
				$("#intropage").hide();
				$("#learningpage").show();

			});

			$("#studybutton").click(function(){

				$("#learningpage").hide();
				$("#studypage").show();
			});

			$("#optionsButton").click(function(){

				$("#optionsPanel").toggle();
				if(optionsShown == false){
					$("#optionsIndicator").css("transform","rotate(180deg)");
					optionsShown = true;
				}
				else{
					$("#optionsIndicator").css("transform","rotate(0deg)");
					optionsShown = false;
				}
				
			});

			$("#enterCheckbox").click(function(){
				if($("#enterCheckbox").prop('checked')){
					requireEnterPress = true;
				}

				else{
					requireEnterPress = false;
				}
			})

			$(".columnToggle").each(function(){

				$(this).click(function(){

					var table = ($(this).closest($("table")).attr("id"));

					

					if($(this).html() == "+"){
						$(this).html("−");
						$(this).css("background-color","black");
						var index = $(this).parent().index();
						var selectedCard = 
						$("#" + table + " .kanaSymbol:nth-child("+String(index+1)+")").each(function(){
							activateCard($(this));
						})
							}
					else{
						$(this).html("+");
						$(this).css("background-color","darkgrey");
						var index = $(this).parent().index();
						$("#" + table + " .kanaSymbol:nth-child("+String(index+1)+")").each(function(){
							
							deactivateCard($(this));
						})
						
					}
					})
				});

			function activateCard(card){

				card.addClass("activated");
				currentPool = $(".activated");
				if(currentPool.length == 1){
					$("#kanaInput").prop('disabled',false);
					nextChar(0);
				}


				
				
			}

			function deactivateCard(card){
				
				card.removeClass("activated");
				currentPool = $(".activated");
				if(currentPool.length == 0){
					$("#kanaInput").prop('disabled',true);
					$("#kanaPrompt").html("-")
					$("#wrongPrompt").html("no kana selected");
					$("#wrongPrompt").css("opacity","0.5");
				}
				
				
			}

			function toggleCard(card){
				if(card.hasClass("activated")){
					deactivateCard(card);
				}

				else{
					activateCard(card);
				}
			}

			$(".kanaSymbol").each(function(){
				$(this).click(function(){
					
					toggleCard($(this));
				})
			})


			
			

			$("#hiraEnable").click(function(){
				$("#optionsTable1 .kanaSymbol").each(function(){
					activateCard($(this));
				})
				$("#optionsTable1 .columnToggle").each(function(){
					$(this).html("−");
					$(this).css("background-color","black");
				})
			})

			$("#hiraDisable").click(function(){
				$("#optionsTable1 .kanaSymbol").each(function(){
					deactivateCard($(this));

				})
				$("#optionsTable1 .columnToggle").each(function(){
					$(this).html("+");

					$(this).css("background-color","darkgrey");
				})
			})

			$("#kanaEnable").click(function(){
				$("#optionsTable2 .kanaSymbol").each(function(){
					activateCard($(this));
				})
				$("#optionsTable2 .columnToggle").each(function(){
					$(this).html("−");
					$(this).css("background-color","black");
				})
			})

			$("#kanaDisable").click(function(){
				$("#optionsTable2 .kanaSymbol").each(function(){
					deactivateCard($(this));
				})
				$("#optionsTable2 .columnToggle").each(function(){
					$(this).html("+");
					$(this).css("background-color","darkgrey");
				})
			})


			

			
		$(".kanaSymbol").each(function(){
			$(this).append("<div class = profBar></div>");
			
		})


			








			



			
				

   
   














		});
	</script>
		
		</div>
	</body>



	









</html>
